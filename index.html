<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Makrozyklus Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;700&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root {
  --navy:   #0D1B2A; --navy2: #162033; --navy3: #1E2D42;
  --slate:  #2A3F5A; --border:#2E4060; --text:  #E8EDF5; --muted: #7A8FA8;
  --accent: #4ECDC4;
  --s-col:#2ECC71; --s-bg:#0D2B1A; --s-mid:#1A4A2A;
  --u-col:#F39C12; --u-bg:#2B1E08; --u-mid:#4A3010;
  --h-col:#E74C3C; --h-bg:#2B0F0D; --h-mid:#4A1A18;
  --w-col:#3498DB; --w-bg:#0D1E2B; --w-mid:#1A3045;
  --c5:#2ECC71; --c4:#82E0AA; --c3:#F39C12; --c2:#E67E22; --c1:#E74C3C;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{background:var(--navy);color:var(--text);font-family:'DM Sans',sans-serif;font-size:16px;line-height:1.5;min-height:100vh}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(78,205,196,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(78,205,196,.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
.wrap{position:relative;z-index:1;max-width:1400px;margin:0 auto;padding:0 40px 60px}

/* HEADER */
header{padding:36px 0 28px;border-bottom:1px solid var(--border);margin-bottom:32px;display:flex;align-items:flex-end;justify-content:space-between;gap:20px;flex-wrap:wrap}
header h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(28px,5vw,52px);letter-spacing:3px;line-height:1;margin-bottom:6px}
header h1 span{color:var(--accent)}
header p{color:var(--muted);font-size:15px;font-weight:300}
.upd{font-family:'Space Mono',monospace;font-size:13px;color:var(--muted);text-align:right}
.upd span{color:var(--accent);display:block}

/* TABS */
.tabs{display:flex;gap:4px;margin-bottom:32px;border-bottom:1px solid var(--border)}
.tab{font-family:'DM Sans',sans-serif;font-size:15px;font-weight:500;color:var(--muted);background:none;border:none;padding:10px 20px;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-1px;transition:all .2s;letter-spacing:.5px}
.tab:hover{color:var(--text)}
.tab.on{color:var(--accent);border-bottom-color:var(--accent)}
.panel{display:none}
.panel.on{display:block;animation:fi .3s ease}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* QUADRANT BAR */
.qbar{display:flex;align-items:center;gap:16px;padding:20px 28px;border-radius:12px;margin-bottom:32px;border:1px solid;transition:all .4s;position:relative;overflow:hidden}
.qbar::before{content:'';position:absolute;inset:0;opacity:.06;background:radial-gradient(circle at 20% 50%,currentColor,transparent 60%)}
.qi{font-size:40px;line-height:1;flex-shrink:0}
.ql{font-family:'Bebas Neue',sans-serif;font-size:32px;letter-spacing:2px;line-height:1}
.qd{font-size:14px;color:var(--muted);margin-top:3px}
.qsigs{margin-left:auto;display:flex;gap:20px;flex-shrink:0}
.spill{display:flex;flex-direction:column;align-items:center;gap:4px}
.spill .sv{font-family:'Space Mono',monospace;font-size:24px;font-weight:700;line-height:1}
.spill .sl{font-size:12px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase}
.qs{background:var(--s-bg);border-color:var(--s-mid);color:var(--s-col)}
.qu{background:var(--u-bg);border-color:var(--u-mid);color:var(--u-col)}
.qh{background:var(--h-bg);border-color:var(--h-mid);color:var(--h-col)}
.qw{background:var(--w-bg);border-color:var(--w-mid);color:var(--w-col)}

/* SECTION LABEL */
.slbl{font-family:'Space Mono',monospace;font-size:12px;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin:28px 0 12px;display:flex;align-items:center;gap:10px}
.slbl::after{content:'';flex:1;height:1px;background:var(--border)}

/* INDICATOR GRID */
.igrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:10px;margin-bottom:8px}
.icard{background:var(--navy2);border:1px solid var(--border);border-radius:10px;padding:18px 20px;display:flex;flex-direction:column;gap:12px;transition:border-color .2s}
.icard:hover{border-color:var(--slate)}
.itop{display:flex;justify-content:space-between;align-items:flex-start;gap:8px}
.iname{font-size:15px;font-weight:500;line-height:1.3}
.icat{font-size:12px;font-family:'Space Mono',monospace;color:var(--muted);white-space:nowrap;flex-shrink:0;padding:2px 7px;background:var(--navy3);border-radius:4px}
.itog{display:flex;gap:6px}
.tbtn{flex:1;padding:8px 4px;border-radius:6px;border:1px solid var(--border);background:var(--navy3);color:var(--muted);font-family:'DM Sans',sans-serif;font-size:14px;font-weight:500;cursor:pointer;transition:all .15s;text-align:center}
.tbtn:hover{border-color:var(--slate);color:var(--text)}
.tup{background:#0D2B1A;border-color:var(--s-col);color:var(--s-col)}
.tmid{background:#2B1E08;border-color:var(--u-col);color:var(--u-col)}
.tdn{background:#2B0F0D;border-color:var(--h-col);color:var(--h-col)}
.isigs{display:flex;gap:8px}
.schip{flex:1;display:flex;flex-direction:column;gap:2px;padding:6px 8px;border-radius:6px;background:var(--navy3);border:1px solid var(--border)}
.stype{font-size:11px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase}
.sval{font-family:'Space Mono',monospace;font-weight:700;font-size:15px}
.sp{color:var(--s-col)}.sn{color:var(--h-col)}.se{color:var(--muted)}
.isrc{font-size:12px;color:var(--muted)}
.isrc a{color:var(--accent);text-decoration:none}
.isrc a:hover{text-decoration:underline}

/* KOMPASS */
.khead{display:grid;grid-template-columns:1fr repeat(4,110px) 1fr;gap:8px;margin-bottom:8px;padding:0 0 8px;border-bottom:1px solid var(--border)}
.kha{font-size:13px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase}
.khs{text-align:center;font-size:15px;font-weight:600;padding:6px 4px;border-radius:6px}
.khs-s{color:var(--s-col);background:var(--s-bg)}
.khs-u{color:var(--u-col);background:var(--u-bg)}
.khs-h{color:var(--h-col);background:var(--h-bg)}
.khs-w{color:var(--w-col);background:var(--w-bg)}
.khc{font-size:13px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase}
.krow{display:grid;grid-template-columns:1fr repeat(4,110px) 1fr;gap:8px;align-items:center;padding:10px 0;border-bottom:1px solid rgba(46,64,96,.5);transition:background .15s}
.krow:hover{background:rgba(30,45,66,.5);border-radius:8px;margin:0 -8px;padding:10px 8px}
.krow:last-child{border-bottom:none}
.kname{font-size:15px;font-weight:500;display:flex;align-items:center;gap:8px}
.kname .em{font-size:16px}
.sc{text-align:center;padding:6px 4px;border-radius:6px;font-size:13px;font-weight:600;transition:all .3s}
.sc.dim{opacity:.3}
.sc.act{opacity:1;transform:scale(1.06);box-shadow:0 2px 12px rgba(0,0,0,.4)}
.sc5{background:rgba(46,204,113,.12);color:var(--c5);border:1px solid rgba(46,204,113,.3)}
.sc4{background:rgba(130,224,170,.08);color:var(--c4);border:1px solid rgba(130,224,170,.2)}
.sc3{background:rgba(243,156,18,.08);color:var(--c3);border:1px solid rgba(243,156,18,.2)}
.sc2{background:rgba(230,126,34,.08);color:var(--c2);border:1px solid rgba(230,126,34,.2)}
.sc1{background:rgba(231,76,60,.08);color:var(--c1);border:1px solid rgba(231,76,60,.2)}
.kcmt{font-size:13px;color:var(--muted);font-style:italic;line-height:1.4}
.ksec{font-family:'Space Mono',monospace;font-size:12px;letter-spacing:2px;text-transform:uppercase;color:var(--accent);padding:20px 0 10px;display:flex;align-items:center;gap:10px}
.ksec::after{content:'';flex:1;height:1px;background:var(--border)}
.legend{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px;padding:14px 18px;background:var(--navy2);border:1px solid var(--border);border-radius:10px}
.li{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--muted)}
.ld{width:8px;height:8px;border-radius:50%;flex-shrink:0}

/* ANLEITUNG */
.anl{max-width:680px;margin:0 auto;padding:8px 0 40px}
.hstep{display:flex;gap:16px;margin-bottom:24px;align-items:flex-start}
.hstep:last-child{margin-bottom:0}
.hnum{width:34px;height:34px;background:var(--accent);color:var(--navy);border-radius:8px;font-family:'Bebas Neue',sans-serif;font-size:20px;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.hnum.alt{background:var(--slate);color:var(--text);font-size:18px}
.hsc h3{font-size:16px;font-weight:600;color:var(--text);margin-bottom:6px}
.hsc p{font-size:15px;color:var(--muted);line-height:1.6}
.hsc p strong{color:var(--text)}
.hdiv{height:1px;background:var(--border);margin:20px 0}
.hquad{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
.hq{padding:10px 14px;border-radius:8px;border:1px solid;font-size:14px}
.hq-t{font-weight:600;margin-bottom:3px;font-size:15px}
.hq-s{opacity:.75;font-size:13px}
.hqs{background:var(--s-bg);border-color:var(--s-mid);color:var(--s-col)}
.hqu{background:var(--u-bg);border-color:var(--u-mid);color:var(--u-col)}
.hqh{background:var(--h-bg);border-color:var(--h-mid);color:var(--h-col)}
.hqw{background:var(--w-bg);border-color:var(--w-mid);color:var(--w-col)}
.htip{margin-top:24px;padding:14px 18px;background:rgba(78,205,196,.07);border:1px solid rgba(78,205,196,.2);border-radius:8px;font-size:14px;color:var(--muted);line-height:1.6}
.htip strong{color:var(--accent)}
.hscale{display:flex;flex-direction:column;gap:7px;margin-top:10px}
.hscale-row{display:flex;align-items:center;gap:10px;font-size:14px}
.hscale-row span:first-child{width:140px;font-weight:700;flex-shrink:0}

@media(max-width:768px){
  .khead,.krow{grid-template-columns:1fr repeat(2,90px)}
  .khs-h,.khs-w,.kcmt{display:none}
  .qsigs{display:none}
  .wrap{padding:0 20px 40px}
}

/* LOGIK TAB */
.logik-wrap{padding:8px 0 40px}
.logik-intro{padding:16px 20px;background:rgba(78,205,196,.07);border:1px solid rgba(78,205,196,.2);border-radius:10px;margin-bottom:24px;font-size:15px;color:var(--muted);line-height:1.6}
.logik-intro strong{color:var(--text)}
.ltable-wrap{overflow-x:auto}
.ltable{width:100%;border-collapse:collapse;font-size:14px}
.ltable thead tr{background:var(--navy3);border-bottom:2px solid var(--border)}
.ltable th{padding:12px 14px;text-align:left;font-family:'Space Mono',monospace;font-size:11px;letter-spacing:1px;text-transform:uppercase;color:var(--accent);white-space:nowrap}
.ltable tbody tr{border-bottom:1px solid rgba(46,64,96,.4);transition:background .15s}
.ltable tbody tr:hover{background:rgba(30,45,66,.6)}
.lgroup td{background:var(--navy3);padding:10px 14px;font-family:'Space Mono',monospace;font-size:11px;letter-spacing:1px;text-transform:uppercase;color:var(--muted);border-top:1px solid var(--border)}
.lname{padding:12px 14px;font-weight:500;color:var(--text);font-size:14px;min-width:200px}
.lcat{padding:12px 8px;font-size:12px;color:var(--muted);white-space:nowrap;font-family:'Space Mono',monospace}
.lpos{padding:12px 10px;font-family:'Space Mono',monospace;font-weight:700;font-size:13px;color:var(--s-col);white-space:nowrap;text-align:center}
.lneg{padding:12px 10px;font-family:'Space Mono',monospace;font-weight:700;font-size:13px;color:var(--h-col);white-space:nowrap;text-align:center}
.lpos-cell{padding:12px 10px;font-family:'Space Mono',monospace;font-weight:700;font-size:13px;color:var(--s-col);white-space:nowrap;text-align:center}
.lneg-cell{padding:12px 10px;font-family:'Space Mono',monospace;font-weight:700;font-size:13px;color:var(--h-col);white-space:nowrap;text-align:center}
.lexp{padding:12px 14px;font-size:13px;color:var(--muted);line-height:1.6;min-width:320px}
.lexp strong{color:var(--text)}
.lexp em{color:var(--accent);font-style:normal}
.logik-hint{margin-top:20px;padding:14px 18px;background:rgba(255,230,109,.06);border:1px solid rgba(255,230,109,.2);border-radius:10px;font-size:14px;color:var(--muted);line-height:1.7}
.logik-hint strong{color:#FFE66D}

/* TOAST */
.toast{position:fixed;bottom:28px;right:28px;background:var(--navy3);border:1px solid var(--accent);color:var(--accent);font-family:'Space Mono',monospace;font-size:13px;padding:10px 20px;border-radius:8px;opacity:0;transform:translateY(10px);transition:all .25s;pointer-events:none;z-index:9999}
.toast.show{opacity:1;transform:none}
</style>
</head>
<body>
<div class="wrap">

<header>
  <div>
    <h1>MAKRO<span>ZYKLUS</span> DASHBOARD</h1>
    <p>Wirtschaftsindikatoren â†’ Zyklusphase â†’ Asset-Allokation &nbsp;|&nbsp; Privatanleger Edition</p>
  </div>
  <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
    <button onclick="resetState()" style="font-family:'DM Sans',sans-serif;font-size:13px;padding:7px 14px;background:var(--navy2);border:1px solid var(--border);border-radius:8px;color:var(--muted);cursor:pointer;transition:all .2s;" onmouseover="this.style.borderColor='var(--h-col)';this.style.color='var(--h-col)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--muted)'">â†º ZurÃ¼cksetzen</button>
    <div class="upd"><span id="dt"></span>Einstellungen werden lokal gespeichert</div>
  </div>
</header>

<div class="tabs">
  <button class="tab on" onclick="sw('ampel')">ğŸ“Š Indikator-Ampel</button>
  <button class="tab" onclick="sw('kompass')">ğŸ§­ Asset-Kompass</button>
  <button class="tab" onclick="sw('anleitung')">ğŸ“– Anleitung</button>
  <button class="tab" onclick="sw('logik')">ğŸ“‹ Indikatoren-Logik</button>
</div>

<!-- TAB 1: AMPEL -->
<div id="tab-ampel" class="panel on">
  <div id="qbar" class="qbar qs">
    <div class="qi" id="qi">ğŸŒ±</div>
    <div>
      <div class="ql" id="ql">FRÃœHLING</div>
      <div class="qd" id="qd">Wachstum â†‘ | Inflation â†“ | Erholung / Early Cycle</div>
    </div>
    <div class="qsigs">
      <div class="spill"><div class="sv" id="sw">0</div><div class="sl">Wachstum</div></div>
      <div class="spill"><div class="sv" id="si">0</div><div class="sl">Inflation</div></div>
    </div>
  </div>
  <div class="slbl">ğŸ”® Vorlaufende Indikatoren</div>
  <div class="igrid" id="g-lead"></div>
  <div class="slbl">ğŸ“ˆ Gleichlaufende Indikatoren</div>
  <div class="igrid" id="g-coin"></div>
  <div class="slbl">ğŸ” Nachlaufende Indikatoren</div>
  <div class="igrid" id="g-lag"></div>
</div>

<!-- TAB 2: KOMPASS -->
<div id="tab-kompass" class="panel">
  <div class="legend">
    <div class="li"><div class="ld" style="background:var(--c5)"></div> â˜…â˜…â˜…â˜…â˜… Top â€“ Ã¼bergewichten</div>
    <div class="li"><div class="ld" style="background:var(--c4)"></div> â˜…â˜…â˜…â˜… Gut â€“ leicht Ã¼bergewichten</div>
    <div class="li"><div class="ld" style="background:var(--c3)"></div> â˜…â˜…â˜… Neutral â€“ marktgewichten</div>
    <div class="li"><div class="ld" style="background:var(--c2)"></div> â˜…â˜… Schwach â€“ untergewichten</div>
    <div class="li"><div class="ld" style="background:var(--c1)"></div> â˜… Meiden â€“ stark untergewichten</div>
  </div>
  <div class="khead">
    <div class="kha">Asset / Sektor</div>
    <div class="khs khs-s">ğŸŒ± FrÃ¼hling</div>
    <div class="khs khs-u">â˜€ï¸ Sommer</div>
    <div class="khs khs-h">ğŸ‚ Herbst</div>
    <div class="khs khs-w">â„ï¸ Winter</div>
    <div class="khc">Kommentar (aktuell)</div>
  </div>
  <div class="ksec">ğŸ“ˆ Aktien â€“ nach Sektor</div>
  <div id="k-sek"></div>
  <div class="ksec">ğŸ’¼ Weitere Asset-Klassen</div>
  <div id="k-ass"></div>
</div>

<!-- TAB 3: ANLEITUNG -->
<div id="tab-anleitung" class="panel">
  <div class="anl">

    <div class="hstep">
      <div class="hnum">1</div>
      <div class="hsc">
        <h3>Indikatoren recherchieren</h3>
        <p>Ã–ffne im Tab <strong>ğŸ“Š Indikator-Ampel</strong> fÃ¼r jeden Indikator den verlinkten Datenlink (z.B. FRED, ISM, BLS). Vergleiche den aktuellen Wert mit dem Wert vor <strong>3â€“6 Monaten</strong>: Steigt er? Bleibt er gleich? FÃ¤llt er?</p>
      </div>
    </div>

    <div class="hstep">
      <div class="hnum">2</div>
      <div class="hsc">
        <h3>Trend auswÃ¤hlen â€“ â¬† Steigt / â¡ Gleich / â¬‡ FÃ¤llt</h3>
        <p>Klicke bei jedem Indikator auf den passenden Trend-Button. Das Dashboard berechnet sofort Wachstums- und Inflationspunkte. Die Chips unter jedem Indikator zeigen, wie viele Punkte dieser Indikator gerade beisteuert.</p>
      </div>
    </div>

    <div class="hstep">
      <div class="hnum">3</div>
      <div class="hsc">
        <h3>Zyklusphase ablesen</h3>
        <p>Der farbige Balken oben zeigt deinen aktuellen <strong>Wirtschaftszyklusquadranten</strong>. Es gibt vier Phasen:</p>
        <div class="hquad">
          <div class="hq hqs"><div class="hq-t">ğŸŒ± FrÃ¼hling</div><div class="hq-s">Wachstum â†‘ Â· Inflation â†“<br>Erholung / Early Cycle</div></div>
          <div class="hq hqu"><div class="hq-t">â˜€ï¸ Sommer</div><div class="hq-s">Wachstum â†‘ Â· Inflation â†‘<br>Boom / Late Cycle</div></div>
          <div class="hq hqh"><div class="hq-t">ğŸ‚ Herbst</div><div class="hq-s">Wachstum â†“ Â· Inflation â†‘<br>Stagflation</div></div>
          <div class="hq hqw"><div class="hq-t">â„ï¸ Winter</div><div class="hq-s">Wachstum â†“ Â· Inflation â†“<br>Rezession</div></div>
        </div>
      </div>
    </div>

    <div class="hstep">
      <div class="hnum">4</div>
      <div class="hsc">
        <h3>Asset-Kompass aufrufen</h3>
        <p>Wechsle zum Tab <strong>ğŸ§­ Asset-Kompass</strong>. Die aktive Jahreszeitspalte leuchtet auf â€“ dort siehst du, welche Sektoren und Asset-Klassen in dieser Phase historisch am besten abschneiden. Der Kommentar rechts erklÃ¤rt das Warum.</p>
      </div>
    </div>

    <div class="hdiv"></div>

    <div class="hstep">
      <div class="hnum alt">ğŸ’¡</div>
      <div class="hsc">
        <h3>Wie oft aktualisieren?</h3>
        <p>Einmal im Monat reicht vÃ¶llig. Ein guter Zeitpunkt ist <strong>Mitte des Monats</strong>, wenn die wichtigsten US-Daten (CPI, PPI, Retail Sales) vorliegen.</p>
      </div>
    </div>

    <div class="hstep">
      <div class="hnum alt">âš–ï¸</div>
      <div class="hsc">
        <h3>Interpretation der Punkte</h3>
        <p><strong>Vorlaufende Indikatoren</strong> geben die Richtung vor, gleichlaufende bestÃ¤tigen, nachlaufende bestÃ¤tigen mit VerzÃ¶gerung. Bei gemischten Signalen zeigt die Mehrheit die Tendenz â€“ eine gewisse UnschÃ¤rfe ist normal.</p>
      </div>
    </div>

    <div class="hstep">
      <div class="hnum alt">ğŸ“Š</div>
      <div class="hsc">
        <h3>Bewertungsskala im Asset-Kompass</h3>
        <div class="hscale">
          <div class="hscale-row"><span style="color:var(--c5)">â˜…â˜…â˜…â˜…â˜… Top</span><span style="color:var(--muted)">Historisch beste Phase â€“ Ã¼bergewichten</span></div>
          <div class="hscale-row"><span style="color:var(--c4)">â˜…â˜…â˜…â˜… Gut</span><span style="color:var(--muted)">Ãœberdurchschnittlich â€“ leicht Ã¼bergewichten</span></div>
          <div class="hscale-row"><span style="color:var(--c3)">â˜…â˜…â˜… Neutral</span><span style="color:var(--muted)">Marktdurchschnitt â€“ neutral gewichten</span></div>
          <div class="hscale-row"><span style="color:var(--c2)">â˜…â˜… Schwach</span><span style="color:var(--muted)">Unterdurchschnittlich â€“ untergewichten</span></div>
          <div class="hscale-row"><span style="color:var(--c1)">â˜… Meiden</span><span style="color:var(--muted)">Historisch schlechteste Phase â€“ stark untergewichten</span></div>
        </div>
      </div>
    </div>

    <div class="htip">
      <strong>âš ï¸ Hinweis:</strong> Die Bewertungen basieren auf historischen Zyklusmustern (Fidelity Sector Research, Ned Davis Research). Sie dienen ausschlieÃŸlich der Orientierung â€“ <strong>keine Anlageberatung</strong>. Vergangenheitswerte garantieren keine zukÃ¼nftige Performance.
    </div>

  </div>
</div>

<!-- TAB 4: INDIKATOREN-LOGIK -->
<div id="tab-logik" class="panel">
  <div class="logik-wrap">

    <div class="logik-intro">
      <p>Diese Tabelle zeigt, wie jeder Indikator bewertet wird â€“ aus der <strong>Zyklusphase-Perspektive</strong>: Wir fragen nicht â€Ist das gut fÃ¼r Aktien?", sondern â€In welcher Phase der Realwirtschaft befinden wir uns gerade?"</p>
    </div>

    <div class="ltable-wrap">
      <table class="ltable">
        <thead>
          <tr>
            <th>Indikator</th>
            <th>Typ</th>
            <th>â¬† Steigt</th>
            <th>â¬‡ FÃ¤llt</th>
            <th>ErklÃ¤rung (AnfÃ¤nger)</th>
          </tr>
        </thead>
        <tbody>
          <tr class="lgroup"><td colspan="5">ğŸ”® Vorlaufende Indikatoren â€“ zeigen die Richtung an, bevor die Wirtschaft dreht</td></tr>
          <tr>
            <td class="lname">Financial Conditions Index (FCI)</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Ein <em>steigender</em> FCI bedeutet restriktivere Finanzbedingungen (hÃ¶here Zinsen, weniger Kredit) â†’ typisch fÃ¼r eine boomende, Ã¼berhitzte Wirtschaft. Ein <em>fallender</em> FCI entsteht wenn die Fed lockert, weil die Wirtschaft schwÃ¤chelt â†’ Rezessions-Signal.</td>
          </tr>
          <tr>
            <td class="lname">Geldmenge M2 (Wachstumsrate YoY)</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">WÃ¤chst M2 stark, ist viel Geld im Umlauf â†’ mehr Konsum, mehr Kredit, mehr Inflation. Schrumpft M2, zieht die Zentralbank LiquiditÃ¤t ab â†’ weniger Wachstum, weniger Inflation.</td>
          </tr>
          <tr>
            <td class="lname">Yield Curve (10J minus 2J)</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1</td>
            <td class="lneg">Wâˆ’1</td>
            <td class="lexp">Eine steile (positive) Kurve signalisiert Wachstumserwartungen â€“ Banken kÃ¶nnen profitabel verleihen, Konjunktur lÃ¤uft. Eine invertierte (negative) Kurve ist historisch der zuverlÃ¤ssigste Rezessionsindikator. Inflation wird hier nicht bewertet, da die Kurvenform primÃ¤r Wachstum spiegelt.</td>
          </tr>
          <tr>
            <td class="lname">ISM Manufacturing PMI â€“ New Orders</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Mehr AuftrÃ¤ge = mehr Produktion geplant = Wirtschaft expandiert. Steigende AuftragseingÃ¤nge erhÃ¶hen auch den Preisdruck (mehr Nachfrage â†’ hÃ¶here Preise). Unter 50 = Schrumpfung.</td>
          </tr>
          <tr>
            <td class="lname">Conference Board LEI</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1</td>
            <td class="lneg">Wâˆ’1</td>
            <td class="lexp">Der LEI fasst 10 FrÃ¼hindikatoren zusammen (Aktienkurse, Baubeginne, Konsumentenerwartungen usw.). Er zeigt 6â€“12 Monate im Voraus, wohin die Wirtschaft lÃ¤uft. Reiner Wachstumsindikator â€“ kein direkter Inflationsbezug.</td>
          </tr>
          <tr>
            <td class="lname">Baubeginne & Baugenehmigungen</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Bauprojekte entstehen, wenn Zinsen niedrig und die Wirtschaft wÃ¤chst. Steigende BauaktivitÃ¤t treibt auch Materialpreise (Holz, Stahl, Kupfer) und lÃ¶hne hoch â†’ Inflationsdruck. EinbrÃ¼che signalisieren oft das Ende eines Zyklus.</td>
          </tr>
          <tr>
            <td class="lname">Verbrauchervertrauen â€“ Erwartung</td>
            <td class="lcat">Vorlaufend</td>
            <td class="lpos">W+1</td>
            <td class="lneg">Wâˆ’1</td>
            <td class="lexp">Wenn Menschen die Zukunft positiv sehen, geben sie mehr aus â†’ Wachstum. Der Erwartungskomponent ist vorlaufend (wie werden Leute in 6 Monaten kaufen?), nicht inflationÃ¤r per se.</td>
          </tr>

          <tr class="lgroup"><td colspan="5">ğŸ“ˆ Gleichlaufende Indikatoren â€“ beschreiben den aktuellen Zustand der Wirtschaft</td></tr>
          <tr>
            <td class="lname">BIP-Wachstum (real, QoQ)</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1</td>
            <td class="lneg">Wâˆ’1</td>
            <td class="lexp">Das BIP ist die direkteste Messung wirtschaftlicher AktivitÃ¤t. WÃ¤chst es, expandiert die Wirtschaft. Real bedeutet inflationsbereinigt â€“ daher kein Inflationspunkt (Inflation ist bereits herausgerechnet).</td>
          </tr>
          <tr>
            <td class="lname">Industrieproduktion (MoM/YoY)</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Mehr Produktion = hÃ¶here KapazitÃ¤tsauslastung = steigende LÃ¶hne und Rohstoffpreise â†’ Inflation. Sinkende Produktion = ÃœberkapazitÃ¤ten, Preisdruck fÃ¤llt.</td>
          </tr>
          <tr>
            <td class="lname">EinzelhandelsumsÃ¤tze (real)</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Hohe UmsÃ¤tze zeigen starke Konsumnachfrage. Starke Nachfrage bei knappem Angebot treibt Preise. EinbrÃ¼che im Konsum dÃ¤mpfen Wachstum und Inflation gleichzeitig.</td>
          </tr>
          <tr>
            <td class="lname">Non-Farm Payrolls / BeschÃ¤ftigung</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Mehr Jobs = mehr Einkommen = mehr Konsum = Wachstum. Gleichzeitig fÃ¼hrt VollbeschÃ¤ftigung zu Lohndruck â†’ Inflation. Jobverluste dÃ¤mpfen beides.</td>
          </tr>
          <tr>
            <td class="lname">PersÃ¶nliche Einkommen & PCE</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Steigende Einkommen finanzieren mehr Ausgaben (PCE = Fed's bevorzugter InflationsmaÃŸstab). Hohe PCE-Werte = Fed schaut genau hin. Sinkende Einkommen = weniger Nachfrage, weniger Inflation.</td>
          </tr>
          <tr>
            <td class="lname">Frachtindex (Cass / Baltic Dry)</td>
            <td class="lcat">Gleichlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Hohe Frachtkosten = viele Waren werden transportiert = Wirtschaft lÃ¤uft. Frachtpreise steigen auch bei NachfrageÃ¼berhang â†’ Inflationsdruck. Ein Einbruch (wie 2008, 2020) signalisiert wirtschaftliche Vollbremsung.</td>
          </tr>

          <tr class="lgroup"><td colspan="5">ğŸ” Nachlaufende Indikatoren â€“ bestÃ¤tigen den Zyklus mit VerzÃ¶gerung</td></tr>
          <tr>
            <td class="lname">Arbeitslosenquote</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lneg-cell">Wâˆ’1</td>
            <td class="lpos-cell">W+1</td>
            <td class="lexp"><strong>Invertiert bewertet:</strong> Steigende Arbeitslosigkeit = Abschwung (Wâˆ’1). Sinkende Arbeitslosigkeit = Aufschwung (W+1). Kein Inflationspunkt, da Arbeitslosigkeit primÃ¤r Wachstum spiegelt â€“ erst Lohndruck fÃ¼hrt zu Inflation (separat erfasst).</td>
          </tr>
          <tr>
            <td class="lname">Kern-CPI / Kern-PCE (YoY)</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lpos">I+1</td>
            <td class="lneg">Iâˆ’1</td>
            <td class="lexp">Der direkteste Inflationsindikator. Steigt er, ist Inflation real vorhanden â€“ kein Wachstumspunkt, da hohe Inflation allein nicht bedeutet, dass die Wirtschaft gut lÃ¤uft (Stagflation mÃ¶glich). FÃ¤llt er, beruhigt sich der Preisdruck.</td>
          </tr>
          <tr>
            <td class="lname">KreditausfÃ¤lle / Delinquency Rates</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lneg-cell">Wâˆ’1</td>
            <td class="lpos-cell">W+1</td>
            <td class="lexp"><strong>Invertiert bewertet:</strong> Steigende AusfÃ¤lle = Haushalte und Unternehmen kÃ¶nnen Schulden nicht bedienen = Abschwung. Sinkende AusfÃ¤lle = KreditqualitÃ¤t gut = Wachstum. Kein Inflationsbezug.</td>
          </tr>
          <tr>
            <td class="lname">Unit Labor Costs (LohnstÃ¼ckkosten)</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lpos">I+1</td>
            <td class="lneg">Iâˆ’1</td>
            <td class="lexp">Steigen die Kosten pro produzierter Einheit, gibt das Unternehmen das an Kunden weiter â†’ Inflation. Reiner Inflationsindikator â€“ kein Wachstumspunkt, da hohe Lohnkosten auch Margen drÃ¼cken kÃ¶nnen.</td>
          </tr>
          <tr>
            <td class="lname">Gewerbeimmobilienpreise</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lpos">W+1 I+1</td>
            <td class="lneg">Wâˆ’1 Iâˆ’1</td>
            <td class="lexp">Steigende Gewerbeimmobilienpreise zeigen hohe Nachfrage nach BÃ¼ros, Lagern, GeschÃ¤ften â†’ Wirtschaft boomt. Sie bestÃ¤tigen auch allgemeinen Preisauftrieb. EinbrÃ¼che (wie post-Covid) signalisieren StrukturschwÃ¤che.</td>
          </tr>
          <tr>
            <td class="lname">Unternehmensgewinne S&P500 (EPS YoY)</td>
            <td class="lcat">Nachlaufend</td>
            <td class="lpos">W+1</td>
            <td class="lneg">Wâˆ’1</td>
            <td class="lexp">Steigende Gewinne bestÃ¤tigen, dass Unternehmen gut verkaufen und Margen halten â†’ Wirtschaft wÃ¤chst. Kein Inflationspunkt: Gewinnwachstum allein sagt wenig Ã¼ber Preisniveau. Einbrechende Gewinne sind oft das spÃ¤te Signal einer Rezession.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="logik-hint">
      <strong>ğŸ’¡ Warum sind manche Indikatoren "invertiert"?</strong><br>
      Bei der Arbeitslosenquote und den KreditausfÃ¤llen gilt: <em>Steigen</em> diese Werte, ist das <em>schlecht</em> fÃ¼r die Wirtschaft â€“ daher Wâˆ’1 wenn steigend. Das ist das Gegenteil der meisten anderen Indikatoren, bei denen "steigend = Wachstum".
    </div>

  </div>
</div>

</div><!-- /wrap -->
<script>
// â”€â”€ DATEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const IND = [
  ["Financial Conditions Index (FCI)",      "lead",+1,+1,0,0,-1,-1,"FRED: NFCI","https://fred.stlouisfed.org/series/NFCI"],
  ["Geldmenge M2 (Wachstumsrate YoY)",      "lead",+1,+1,0,0,-1,-1,"FRED: M2SL","https://fred.stlouisfed.org/series/M2SL"],
  ["Yield Curve (10J minus 2J)",             "lead",+1, 0,0,0,-1, 0,"FRED: T10Y2Y","https://fred.stlouisfed.org/series/T10Y2Y"],
  ["ISM Manufacturing PMI â€“ New Orders",    "lead",+1,+1,0,0,-1,-1,"ismworld.org","https://www.ismworld.org/supply-management-news-and-reports/reports/ism-report-on-business/pmi/"],
  ["Conference Board LEI",                  "lead",+1, 0,0,0,-1, 0,"conference-board.org","https://www.conference-board.org/topics/us-leading-indicators"],
  ["Baubeginne & Baugenehmigungen",         "lead",+1,+1,0,0,-1,-1,"census.gov","https://www.census.gov/construction/nrc/index.html"],
  ["Verbrauchervertrauen â€“ Erwartung",      "lead",+1, 0,0,0,-1, 0,"Univ. Michigan","https://data.sca.isr.umich.edu/"],
  ["BIP-Wachstum (real, QoQ)",              "coin",+1, 0,0,0,-1, 0,"BEA: GDP","https://www.bea.gov/data/gdp/gross-domestic-product"],
  ["Industrieproduktion (MoM/YoY)",         "coin",+1,+1,0,0,-1,-1,"FRED: INDPRO","https://fred.stlouisfed.org/series/INDPRO"],
  ["EinzelhandelsumsÃ¤tze (real)",           "coin",+1,+1,0,0,-1,-1,"census.gov/retail","https://www.census.gov/retail/index.html"],
  ["Non-Farm Payrolls / BeschÃ¤ftigung",     "coin",+1,+1,0,0,-1,-1,"BLS: CES","https://www.bls.gov/ces/"],
  ["PersÃ¶nliche Einkommen & PCE",           "coin",+1,+1,0,0,-1,-1,"BEA: PCE","https://www.bea.gov/data/consumer-spending/main"],
  ["Frachtindex (Cass / Baltic Dry)",       "coin",+1,+1,0,0,-1,-1,"Cass Freight","https://www.cassinfo.com/freight-audit-payment/cass-transportation-indexes/cass-freight-index"],
  ["Arbeitslosenquote",                     "lag", -1, 0,0,0,+1, 0,"BLS: CPS","https://www.bls.gov/cps/"],
  ["Kern-CPI / Kern-PCE (YoY)",             "lag",  0,+1,0,0, 0,-1,"BLS: CPI","https://www.bls.gov/cpi/"],
  ["KreditausfÃ¤lle / Delinquency Rates",    "lag", -1, 0,0,0,+1, 0,"FRED: Delinquency","https://fred.stlouisfed.org/series/DRCCLACBS"],
  ["Unit Labor Costs (LohnstÃ¼ckkosten)",    "lag",  0,+1,0,0, 0,-1,"BLS: Labor Costs","https://www.bls.gov/lpc/"],
  ["Gewerbeimmobilienpreise",               "lag", +1,+1,0,0,-1,-1,"Green Street","https://www.greenstreet.com/"],
  ["Unternehmensgewinne S&P500 (EPS YoY)", "lag", +1, 0,0,0,-1, 0,"FactSet Earnings","https://insight.factset.com/topic/earnings"],
];

// [Name, Emoji, F,S,H,W, Komm-F, Komm-S, Komm-H, Komm-W]
const SEK = [
  ["Informationstechnologie","ğŸ’»",5,4,1,2,"Beste Phase: sinkende Zinsen beflÃ¼geln Bewertungen","Noch gut: Nachfrage hoch, aber steigende Zinsen belasten","Meiden: Bewertungen unter Druck, Zinsanstieg schadet","Selektiv: QualitÃ¤tsaktien halten, aber Vorsicht"],
  ["Finanzen (Banken, Vers.)","ğŸ¦",4,5,2,1,"Gut: Kreditwachstum beginnt, Zinsen noch niedrig","Top: Steile Kurve, starke Margen, hohes Kreditwachstum","Schwach: KreditausfÃ¤lle steigen, Konjunktur dreht","Meiden: Hohe Ausfallraten, Kreditklemme mÃ¶glich"],
  ["Industrie & Zykliker","ğŸ­",4,5,1,1,"Gut: Auftragseingang steigt, KapazitÃ¤ten werden aufgebaut","Top: Volle Auslastung, Preissetzungsmacht, starke Gewinne","Meiden: AuftrÃ¤ge brechen ein, Margen unter Druck","Meiden: Tiefstzyklus, ÃœberkapazitÃ¤ten"],
  ["Nicht-BasiskonsumgÃ¼ter","ğŸ›ï¸",5,3,1,1,"Top: Konsumlaune steigt, Realeinkommen erholen sich","Neutral: Konsum gut, aber Inflation frisst Kaufkraft","Meiden: Konsumenten sparen, UmsÃ¤tze brechen ein","Meiden: Arbeitslosigkeit hoch, KonsumzurÃ¼ckhaltung"],
  ["Energie (Ã–l & Gas)","â›½",1,5,5,1,"Meiden: Nachfrage noch schwach, Preise moderat","Top: HÃ¶chste Nachfrage + Inflation = Preisexplosion","Top: Stagflation = Ã–l als Inflationsschutz","Meiden: Nachfrage kollabiert, Rohstoffpreise fallen"],
  ["Rohstoffe & Materialien","â›ï¸",2,5,4,1,"Neutral: Eher spÃ¤ter FrÃ¼hling / frÃ¼her Sommer relevant","Top: Industrienachfrage + Inflation = Preisboom","Gut: Inflation schÃ¼tzt, aber Nachfrage schwÃ¤cher","Meiden: Nachfrage bricht weg, Ãœberangebot"],
  ["Gesundheit & Pharma","ğŸ’Š",3,2,3,5,"Neutral: Defensiv, aber nicht die Outperformer-Phase","Schwach: Zyklische Sektoren dominieren","Neutral: Defensive QualitÃ¤ten, Inflation drÃ¼ckt","Top: Sicherer Hafen, nicht-zyklische Nachfrage"],
  ["BasiskonsumgÃ¼ter","ğŸ›’",2,2,3,5,"Neutral: Defensiv, aber Wachstumssektoren dominieren","Schwach: GÃ¼nstigere Sektoren performen besser","Gut: PreisÃ¼berwÃ¤lzung mÃ¶glich, stabile Nachfrage","Top: Nicht-zyklisch, Dividenden, sicherer Hafen"],
  ["Versorger","ğŸ’¡",3,1,2,4,"Neutral: Anleiheersatz, aber kein Wachstumssektor","Meiden: Steigende Zinsen machen Anleihen attraktiver","Neutral: Defensive QualitÃ¤t, aber Kostendruck","Gut: Stabile Cashflows, hohe Dividenden"],
  ["Immobilien & REITs","ğŸ˜ï¸",4,1,1,3,"Gut: Sinkende Zinsen + Wirtschaft erholt sich","Meiden: Steigende Zinsen belasten Bewertungen stark","Meiden: Zinsen hoch + Wirtschaft schwÃ¤cher = Doppeldruck","Neutral: Zinsen fallen â†’ Erleichterung"],
  ["Kommunikation & Medien","ğŸ“¡",4,3,2,2,"Gut: Wachstumsorientiert, profitiert von Zinssenkungserwartung","Neutral: Gemischt â€“ defensiv und zyklisch","Schwach: Werbebudgets werden gekÃ¼rzt","Schwach: Konjunktursensitiver Teil leidet"],
];

const ASS = [
  ["Aktien allgemein (Breit)","ğŸ“ˆ",4,4,2,1,"Gut: Early-Cycle-Rally beginnt, gÃ¼nstige Bewertungen","Gut: Gewinne stark, aber SpÃ¤tphase nÃ¤hert sich","Schwach: Gewinnrevisionen negativ, Risiko steigt","Meiden: Rezession, Gewinne brechen ein"],
  ["Staatsanleihen (10J+)","ğŸ“œ",4,1,2,5,"Gut: Inflation fÃ¤llt â†’ Anleihepreise steigen","Meiden: Steigende Inflation drÃ¼ckt Anleihepreise","Neutral: Inflation hoch, aber Flucht in Sicherheit","Top: Deflation/Disinflation, Zinsen fallen stark"],
  ["Unternehmensanleihen (IG)","ğŸ¢",3,3,2,3,"Gut: Spreads sinken, Wirtschaft erholt sich","Gut: Starke Bilanzen, aber Zinsen steigen","Schwach: Spreads weiten sich, Ausfallrisiko steigt","Neutral: Spreads weit, aber ZinsrÃ¼ckgang stÃ¼tzt"],
  ["High-Yield-Anleihen","âš¡",4,3,1,1,"Gut: Spreads sinken, Risikobereitschaft steigt","Neutral: Noch OK, aber Zinslast steigt","Meiden: Ausfallraten steigen schnell","Meiden: Hohe AusfÃ¤lle, kein Kapitalmarkt"],
  ["Gold","ğŸ¥‡",3,2,5,4,"Neutral: Zinsen fallen â†’ positiv, aber Risikobereitschaft steigt","Schwach: Reale Zinsen steigen â†’ Gold unter Druck","Top: Inflationsschutz + Stagflationsangst = beste Phase","Gut: Deflationsangst â†’ Flucht in sicheren Hafen"],
  ["Rohstoffe (Ã–l, Kupfer, Agrar)","ğŸ›¢ï¸",2,5,4,1,"Neutral: Nachfrage beginnt zu steigen, noch kein Boom","Top: Maximale Nachfrage + Inflation = Preisexplosion","Gut: Inflation schÃ¼tzt, aber Nachfrage schwÃ¤cher","Meiden: Nachfrage bricht weg, Preise fallen"],
  ["Cash & Geldmarkt","ğŸ’µ",2,3,4,3,"Wenig attraktiv: Zinsen fallen, bessere Alternativen","Neutral: Hohe Zinsen, aber OpportunitÃ¤tskosten","Gut: Kapital schÃ¼tzen, hohe Kurzfristzinsen","Neutral: Zinsen fallen, aber Sicherheit wichtig"],
  ["KryptowÃ¤hrungen (Bitcoin)","â‚¿",3,2,1,1,"Neutral/Spekulativ: Risikobereitschaft steigt, aber volatil","Schwach: LiquiditÃ¤tsentzug durch ZinserhÃ¶hungen","Meiden: Risikoaversion + LiquiditÃ¤tsabzug","Meiden: Risiko-Off, Korrelation mit Aktien"],
];

// â”€â”€ STATE & LOCALSTORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STORAGE_KEY = 'makro_v1';
const ST = {};

function loadState() {
  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      const p = JSON.parse(saved);
      IND.forEach((_,i) => { ST[i] = p[i] || 'mid'; });
      return true;
    }
  } catch(e) {}
  IND.forEach((_,i) => { ST[i] = 'mid'; });
  return false;
}

function saveState() {
  try { localStorage.setItem(STORAGE_KEY, JSON.stringify(ST)); } catch(e) {}
  showToast();
}

function resetState() {
  if (!confirm('Alle Indikatoren zurÃ¼cksetzen?')) return;
  IND.forEach((_,i) => { ST[i] = 'mid'; });
  localStorage.removeItem(STORAGE_KEY);
  renderInds();
  update();
  showToast('ğŸ”„ ZurÃ¼ckgesetzt');
}

function showToast(msg) {
  let t = document.getElementById('toast');
  if (!t) { t = document.createElement('div'); t.id='toast'; document.body.appendChild(t); }
  t.textContent = msg || 'ğŸ’¾ Gespeichert';
  t.className = 'toast show';
  clearTimeout(t._timer);
  t._timer = setTimeout(() => t.classList.remove('show'), 2200);
}

// â”€â”€ CALC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function calc() {
  let w=0,inf=0;
  IND.forEach(([,,wu,iu,we,ie,wd,id],i)=>{
    const t=ST[i];
    if(t==='up'){w+=wu;inf+=iu}
    else if(t==='mid'){w+=we;inf+=ie}
    else{w+=wd;inf+=id}
  });
  return{w,inf};
}

function quad(w,i){
  if(w>0&&i<=0)return'S';
  if(w>0&&i>0) return'U';
  if(w<=0&&i>0)return'H';
  return'W';
}

const QI={
  S:{icon:'ğŸŒ±',lbl:'FRÃœHLING',desc:'Wachstum â†‘  |  Inflation â†“  |  Erholung / Early Cycle',cls:'qs',s:'F'},
  U:{icon:'â˜€ï¸',lbl:'SOMMER',  desc:'Wachstum â†‘  |  Inflation â†‘  |  Boom / Late Cycle',      cls:'qu',s:'S'},
  H:{icon:'ğŸ‚',lbl:'HERBST',  desc:'Wachstum â†“  |  Inflation â†‘  |  Stagflation',             cls:'qh',s:'H'},
  W:{icon:'â„ï¸',lbl:'WINTER',  desc:'Wachstum â†“  |  Inflation â†“  |  Rezession',              cls:'qw',s:'W'},
};
const SI={F:0,S:1,H:2,W:3};
const SL={5:'â˜…â˜…â˜…â˜…â˜… Top',4:'â˜…â˜…â˜…â˜… Gut',3:'â˜…â˜…â˜… Neutral',2:'â˜…â˜… Schwach',1:'â˜… Meiden'};
const SC={5:'sc5',4:'sc4',3:'sc3',2:'sc2',1:'sc1'};
const CL={lead:'Vorlaufend',coin:'Gleichlaufend',lag:'Nachlaufend'};
const GID={lead:'g-lead',coin:'g-coin',lag:'g-lag'};

// â”€â”€ RENDER CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function card([name,cat,wu,iu,we,ie,wd,id,sn,su],i){
  const t=ST[i],w=t==='up'?wu:t==='down'?wd:we,inf=t==='up'?iu:t==='down'?id:ie;
  const wc=w>0?'sp':w<0?'sn':'se', ic=inf>0?'sp':inf<0?'sn':'se';
  return`<div class="icard">
    <div class="itop"><div class="iname">${name}</div><div class="icat">${CL[cat]}</div></div>
    <div class="itog">
      <button class="tbtn${t==='up'?' tup':''}" onclick="setT(${i},'up')">â¬† Steigt</button>
      <button class="tbtn${t==='mid'?' tmid':''}" onclick="setT(${i},'mid')">â¡ Gleich</button>
      <button class="tbtn${t==='down'?' tdn':''}" onclick="setT(${i},'down')">â¬‡ FÃ¤llt</button>
    </div>
    <div class="isigs">
      <div class="schip"><div class="stype">Wachstum</div><div class="sval ${wc}">${w>0?'+'+w:w}</div></div>
      <div class="schip"><div class="stype">Inflation</div><div class="sval ${ic}">${inf>0?'+'+inf:inf}</div></div>
    </div>
    <div class="isrc">ğŸ“ <a href="${su}" target="_blank">${sn}</a></div>
  </div>`;
}

function renderInds(){
  const g={lead:[],coin:[],lag:[]};
  IND.forEach((d,i)=>g[d[1]].push([d,i]));
  ['lead','coin','lag'].forEach(k=>{
    document.getElementById(GID[k]).innerHTML=g[k].map(([d,i])=>card(d,i)).join('');
  });
}

// â”€â”€ UPDATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function update(){
  const{w,inf}=calc();
  const q=quad(w,inf),qi=QI[q];
  const bar=document.getElementById('qbar');
  bar.className=`qbar ${qi.cls}`;
  document.getElementById('qi').textContent=qi.icon;
  document.getElementById('ql').textContent=qi.lbl;
  document.getElementById('qd').textContent=qi.desc;
  const we=document.getElementById('sw'),ie=document.getElementById('si');
  we.textContent=(w>0?'+':'')+w;
  ie.textContent=(inf>0?'+':'')+inf;
  we.style.color=w>0?'var(--s-col)':w<0?'var(--h-col)':'var(--muted)';
  ie.style.color=inf>0?'var(--u-col)':inf<0?'var(--w-col)':'var(--muted)';
  renderKompass(qi.s);
}

// â”€â”€ KOMPASS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function krow([name,em,f,s,h,w,cf,cs,ch,cw],season){
  const scores=[f,s,h,w],cmts=[cf,cs,ch,cw],si=SI[season];
  const cells=scores.map((sc,idx)=>`<div class="sc ${SC[sc]} ${idx===si?'act':'dim'}">${SL[sc]}</div>`).join('');
  return`<div class="krow"><div class="kname"><span class="em">${em}</span>${name}</div>${cells}<div class="kcmt">${cmts[si]}</div></div>`;
}

function renderKompass(s){
  document.getElementById('k-sek').innerHTML=SEK.map(r=>krow(r,s)).join('');
  document.getElementById('k-ass').innerHTML=ASS.map(r=>krow(r,s)).join('');
}

// â”€â”€ INTERAKTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setT(idx,val){
  ST[idx]=val;
  const ind=IND[idx],g=document.getElementById(GID[ind[1]]);
  const cards=g.querySelectorAll('.icard');
  let pos=0;
  IND.forEach((d,i)=>{if(i<idx&&d[1]===ind[1])pos++;});
  if(cards[pos])cards[pos].outerHTML=card(ind,idx);
  update();
  saveState();
}

function sw(name){
  const names=['ampel','kompass','anleitung','logik'];
  document.querySelectorAll('.tab').forEach((b,i)=>b.classList.toggle('on',names[i]===name));
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('on'));
  document.getElementById('tab-'+name).classList.add('on');
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const now=new Date();
document.getElementById('dt').textContent=now.toLocaleDateString('de-DE',{day:'2-digit',month:'2-digit',year:'numeric'})+' Â· ';
loadState();
renderInds();
update();
</script>
</body>
</html>
